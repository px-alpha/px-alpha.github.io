
<!doctype html>














<html class="theme-next muse use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



  
  
    
    
  <script src="/assets/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/assets/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/assets/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/assets/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/assets/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />
<link href="https://fonts.googleapis.com/css2?family=Vollkorn:ital,wght@1,700&display=swap" rel="stylesheet">


  <meta name="keywords" content="GRAKN,,applied,semantic,technology," />





  <link rel="alternate" href="/atom.xml" title="PX | Alpha" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/assets/favicon.ico?v=5.1.1" />
















<meta name="description" content="Automated rule based discrepancy discovery by adding knowledge rules to an existing data set">
<meta name="keywords" content="GRAKN,, applied, semantic, technology">
<meta property="og:type" content="article">
<meta property="og:title" content="A taste of GRAKN">
<meta property="og:url" content="http://localhost:4000/what%20i%20research/2020/05/13/A-taste-of-GRAKN/">
<meta property="og:site_name" content="PX | Alpha">
<meta property="og:description" content="Automated rule based discrepancy discovery by adding knowledge rules to an existing data set">
<meta property="og:locale" content="en">
<meta property="og:image" content="/assets/images/Structure1.png">
<meta property="og:image" content="/assets/images/Structure2c.png">
<meta property="og:image" content="/assets/images/Structure3.png">
<meta property="og:image" content="/assets/images/ruleresult.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="A taste of GRAKN">
<meta name="twitter:description" content="Automated rule based discrepancy discovery by adding knowledge rules to an existing data set">
<meta name="twitter:image" content="/assets/images/Structure1.png">


<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://localhost:4000/"/>





  <title>A taste of GRAKN</title>
  
















  
  <script src="https://www.px-alpha.com/px-upload-2321/embed.js"></script>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en" background-image: url('/assets/images/Achtergrond.png'); background-repeat: no-repeat;>

  
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> <div class="site-brand-wrapper">
  <div class="site-meta custom-logo">
    
      <div class="site-meta-headline">
        <a>
          <img class="custom-logo-image" src="http://www.px-alpha.com/assets/images/screenshot-docs.google.com-2017-12-22-13-17-25.png"
               alt="PX | Alpha"/>
        </a>
      </div>
    

      <div class="custom-logo-site-title" style="line-height:0;">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">PX | Alpha</span>
        <span class="logo-line-after"><i></i></span> 
      </a>
      &nbsp;
    </div>
      
        <p class="site-subtitle">Applied digital technology for capital projects</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

<div id="posts" class="posts-expand">
  
  

  

  
  
  

  <article class="post post-type- " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://localhost:4000/what%20i%20research/2020/05/13/A-taste-of-GRAKN/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Gert-Jan Aaftink">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="assets/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="PX | Alpha">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
          
          
            A taste of GRAKN
          
        </h1>
        

          <div class="post-meta">
            <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-05-13T00:00:00+02:00">
                2020-05-13
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/category/#/what%20I%20research" itemprop="url" rel="index">
                    <span itemprop="name">what I research</span>
                  </a>
                </span>

                
                
              
            </span>
          
	    <p>
	      Words:
	      
	      5089
	      ,&nbsp; 
	      34 minutes to read
	    </p>
          
            
          

          
          

          

          

          
            
                <div class="post-description">
                    Automated rule based discrepancy discovery by adding knowledge rules to an existing data set
                </div>
            
          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <blockquote>
  <p>Automated rule based discrepancy discovery by adding knowledge rules to an existing data set</p>
</blockquote>

<!-- more -->

<h2 id="introduction">Introduction</h2>

<p class="px-article">A typical situation in current engineering practice is the usage of a
multitude of tools to perform the design work.  A functional design
system used to design the basic functional setup of an installation
followed by a detail design in a 3D CAD system. In this case some of
the design data will be in both systems (for example the size
information of pipes etc.). Another example is document (-revision)
information, where, during to the ongoing engineering work a central
document management system stores versions of documents created in the
design tools. There is a real risc that both systems do not ‘agree’ on
the latest version. In these cases it is essential to be able to check
for differences, to measure them and to report them, to be able to
steer on data quality during the engineering process.</p>

<p>A complicating factor here is that typically engineering objects
contain many design aspects, and one needs to perform the above check
for each of these aspects. In this post I will present an approach
that allows a fully automated check over all design aspects with a
single knowledge rule, which greatly simplifies the above described
problem.  One thing to add: the approach described here is part of a
procedure for which we filed for a patent, so when interested, please
contact me for an update on the usage conditions.</p>

<p>The main reason to research and write this article was that, at the
time we came up with the idea, we were sure that this could work. Due
to production pressure we did not have the time to actually test
it. And the question stayed in the back of my mind for some
years. Reading about GRAKN, I was reminded of the the unanswered
question, and decided to see I could actually make this work. And…spoiler
alert: yes: it actually does.</p>

<h2 id="grakn">GRAKN</h2>

<p>GRAKN is not that well known, so a short introduction here makes
sense. GRAKN is an open-source, distributed knowledge graph for
knowledge-oriented systems. It is an evolution of the relational
database for highly interconnected data as it provides a concept-level
schema that fully implements the Entity-Relationship (ER)
model. However, GRAKN’s schema is also type system that implements the
principles of knowledge representation and reasoning. (source:
Wikipedia: https://en.wikipedia.org/wiki/GRAKN.AI). It’s the knowledge
representation and reasoning that sets it apart. The representation is
most accomplished through the GRAKN workbench, which, even though
currently limited, already is an indispensable tool to enable a quick
look at the stored information structure.</p>

<p>The reasoning capability is what made GRAKN interesting as a research topic to
me. GRAKN has the ability to virtually add data to the graph based on
rules, that you can define at any moment. This separates it from
reasoning in most RDFS approaches, where the reasoning is done during
ingress. This feature truly helps in adding meaning and knowledge to
existing data, which we will see in the rest of this article.</p>

<p>If you are interested in the GRAKN environment itself: <a href="https://grakn.ai/">this</a> is a good place to start.</p>

<h2 id="outline-of-this-article">Outline of this article</h2>

<p>As stated in the introduction, the use-case
has to do which multi-sourced data and the typical data quality
processes around it. These are typical topics is today’s multi system
design factories. What I will show first is the creation of the base
data structure that describes a typical data set. Then, I’ll show how to load data
into that set. This wille be some made up data, just to indicate the
typical data. In a real life example of course this data will come
from some kind of extraction program that gets it from the
typical engineering systems.</p>

<p>After this step I’ll show the the way I engineered the rule. Finally
this rule will be loaded in the data set, and I’ll show how we can measure
the quality of the multi sourced data.</p>

<p>The main idea of data quality measuring is something that needs some
explanation. The usual approach to this is to run some kind of rules
or scripts over the data as is, to count the number of times that data
that is not according to the rules. The approach here
is different: using the rule system we <em>add</em> virtual data to the data
set that indicates the erroneous data. A typical example is the
situation where two systems contain the same object, but have
different values for a given attribute. In that case a typed relation
will be created between the two attributes that points out the
difference. Measuring data quality in this case means just counting
the number of these typed relations.  This is 
attractive because, based on the way the data is structured, the
creation of the type relations can be done for all attributes in one
go, thus greatly simplifying the entire process. A second positive
aspect is that, by identifying the erroneous information in this way
the ‘repair’ process is also simplified: it is quite easy to point
the user to the problem objects in follow-up steps.</p>

<p>As a side note, and for all of you coming up with the ‘What happened to
the single source of the truth solution for this problem?’ question:
please see my <a href="/what%20i%20think/2020/05/17/The-Single-Source-Of-The-Truth/">article</a> on that
topic. There is a case for this plan of attack as well.</p>

<h2 id="introducing">Introducing</h2>
<p>I’ll introduce the main players first: meet the data structure and the sample data-set.</p>

<h3 id="data-structure">Data structure</h3>

<p>The data structure is made up out of 5 typical data elements and some
data relations that are encountered in typical plant design processes.</p>

<h4 id="plantobject">PlantObject</h4>

<p>A PlantObject is a something on a plant. Typical examples: pipe, pumps
et cetera. For the model presented here, the PlantObject is
represented only by an Identification code. In real world situations
things like life-cycle information would probably also be a part of
this part of the structure. However for our current example that is of
no importance here, hence I’m not including any of that.</p>

<p>The GRAKN code for this is:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1<br data-jekyll-commonmark-ghpages="" />2<br data-jekyll-commonmark-ghpages="" />3<br data-jekyll-commonmark-ghpages="" />4<br data-jekyll-commonmark-ghpages="" />5<br data-jekyll-commonmark-ghpages="" />6<br data-jekyll-commonmark-ghpages="" /></pre></td><td class="code"><pre><span class="n">plantobject</span> <span class="nb">sub</span> <span class="n">entity</span><span class="p">,</span><br data-jekyll-commonmark-ghpages="" />   <span class="n">plays</span> <span class="n">represents</span><span class="p">,</span><br data-jekyll-commonmark-ghpages="" />   <span class="n">has</span> <span class="n">ident</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" /><span class="n">ident</span> <span class="nb">sub</span> <span class="n">attribute</span><span class="p">,</span><br data-jekyll-commonmark-ghpages="" />   <span class="n">datatype</span> <span class="n">string</span><span class="p">;</span></pre></td></tr></tbody></table></code></pre></figure>

<p>It basically introduces the PlantObject as a subclass from entity
(which is the base class, much alike the Thing class in RDFS), states
that it has a property ident, and that it can play a role in a
relation, in which case it plays the role represents (more on this
later). The ident attribute is then defined as a string. In real life
situations probably some extension of the definition would be useful,
like the declaration that the string has to be unique. However, for
the sake of conciseness I’ll discard that topic for now.</p>

<h4 id="sysplantobject-and-system">SysPlantObject and System</h4>

<p>The next objects types introduced are the SysPlantObject and the
System object.  Remember, in our example we expect the same data to be
in multiple systems. The System object represents these
systems. Example values could be values could be COMOS, E3D,
Microstation et cetera, tools you would typically find in a
plantdesign environment. The SysPlantObject is the pointer to the
system specific representation of the PlantObject. So here we would
find the PlantObject in the system specific version. Typically, here
the expectation is that these objects in the system have the same
identification, however in our data set they also have a specific code
(name) to be able to identify them. The definition code is like this:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1<br data-jekyll-commonmark-ghpages="" />2<br data-jekyll-commonmark-ghpages="" />3<br data-jekyll-commonmark-ghpages="" />4<br data-jekyll-commonmark-ghpages="" />5<br data-jekyll-commonmark-ghpages="" />6<br data-jekyll-commonmark-ghpages="" />7<br data-jekyll-commonmark-ghpages="" />8<br data-jekyll-commonmark-ghpages="" />9<br data-jekyll-commonmark-ghpages="" />10<br data-jekyll-commonmark-ghpages="" />11<br data-jekyll-commonmark-ghpages="" />12<br data-jekyll-commonmark-ghpages="" />13<br data-jekyll-commonmark-ghpages="" />14<br data-jekyll-commonmark-ghpages="" />15<br data-jekyll-commonmark-ghpages="" />16<br data-jekyll-commonmark-ghpages="" />17<br data-jekyll-commonmark-ghpages="" />18<br data-jekyll-commonmark-ghpages="" />19<br data-jekyll-commonmark-ghpages="" />20<br data-jekyll-commonmark-ghpages="" /></pre></td><td class="code"><pre><span class="n">sysplantobject</span> <span class="nb">sub</span> <span class="n">entity</span><span class="p">,</span><br data-jekyll-commonmark-ghpages="" />   <span class="n">plays</span> <span class="n">representedby</span><span class="p">,</span><br data-jekyll-commonmark-ghpages="" />   <span class="n">plays</span> <span class="n">defines</span><span class="p">,</span><br data-jekyll-commonmark-ghpages="" />   <span class="n">has</span> <span class="nb">name</span><span class="p">,</span><br data-jekyll-commonmark-ghpages="" />   <span class="n">has</span> <span class="n">description</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" /><span class="nb">name</span> <span class="nb">sub</span> <span class="n">attribute</span><span class="p">,</span><br data-jekyll-commonmark-ghpages="" />   <span class="n">datatype</span> <span class="n">string</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" /><span class="n">description</span> <span class="nb">sub</span> <span class="n">attribute</span><span class="p">,</span><br data-jekyll-commonmark-ghpages="" />   <span class="n">datatype</span> <span class="n">string</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" /><span class="nb">system</span> <span class="nb">sub</span> <span class="n">entity</span><span class="p">,</span><br data-jekyll-commonmark-ghpages="" />   <span class="n">plays</span> <span class="n">hasrepresentingsystem</span><span class="p">,</span><br data-jekyll-commonmark-ghpages="" />   <span class="n">has</span> <span class="n">sysname</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" /><span class="n">representation</span> <span class="nb">sub</span> <span class="n">relation</span><span class="p">,</span><br data-jekyll-commonmark-ghpages="" />   <span class="n">relates</span> <span class="n">representedby</span><span class="p">,</span><br data-jekyll-commonmark-ghpages="" />   <span class="n">relates</span> <span class="n">represents</span><span class="p">,</span><br data-jekyll-commonmark-ghpages="" />   <span class="n">relates</span> <span class="n">hasrepresentingsystem</span><span class="p">;</span></pre></td></tr></tbody></table></code></pre></figure>

<p>A new element here is the representation relation. It states that
there is a three way relation between system, PlantObject and
Sysplantobject. the roles of the relation (the representedby,
represents, hasrepresentingsystem) are used to identify the
objects types that can be part of the relation, see for example the
PlantObject that take part in the represents role).</p>

<p>This part of the structure now looks like this:</p>

<p><img src="/assets/images/Structure1.png" alt="image" /></p>

<p>Now that we have the SysPlantObject, representing PlantObject in a
certain system, the next step is to add the attributes that we (later)
want to check. For naming those I’m following the names used in the
original book about Industrial ontologies: “Gellish, a generic
extensible ontological language”, by Andries van Renssen. In that book
these attributes are called aspects. Our code to add them to the structure is:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1<br data-jekyll-commonmark-ghpages="" />2<br data-jekyll-commonmark-ghpages="" />3<br data-jekyll-commonmark-ghpages="" />4<br data-jekyll-commonmark-ghpages="" />5<br data-jekyll-commonmark-ghpages="" />6<br data-jekyll-commonmark-ghpages="" />7<br data-jekyll-commonmark-ghpages="" />8<br data-jekyll-commonmark-ghpages="" />9<br data-jekyll-commonmark-ghpages="" />10<br data-jekyll-commonmark-ghpages="" />11<br data-jekyll-commonmark-ghpages="" />12<br data-jekyll-commonmark-ghpages="" />13<br data-jekyll-commonmark-ghpages="" />14<br data-jekyll-commonmark-ghpages="" />15<br data-jekyll-commonmark-ghpages="" />16<br data-jekyll-commonmark-ghpages="" />17<br data-jekyll-commonmark-ghpages="" />18<br data-jekyll-commonmark-ghpages="" />19<br data-jekyll-commonmark-ghpages="" />20<br data-jekyll-commonmark-ghpages="" />21<br data-jekyll-commonmark-ghpages="" />22<br data-jekyll-commonmark-ghpages="" />23<br data-jekyll-commonmark-ghpages="" />24<br data-jekyll-commonmark-ghpages="" />25<br data-jekyll-commonmark-ghpages="" />26<br data-jekyll-commonmark-ghpages="" />27<br data-jekyll-commonmark-ghpages="" />28<br data-jekyll-commonmark-ghpages="" />29<br data-jekyll-commonmark-ghpages="" />30<br data-jekyll-commonmark-ghpages="" />31<br data-jekyll-commonmark-ghpages="" /></pre></td><td class="code"><pre><span class="n">aspect_definition</span> <span class="nb">sub</span> <span class="n">entity</span><span class="p">,</span><br data-jekyll-commonmark-ghpages="" />    <span class="n">has</span> <span class="n">aspect_name</span><span class="p">,</span><br data-jekyll-commonmark-ghpages="" />    <span class="n">has</span> <span class="n">aspect_description</span><span class="p">,</span><br data-jekyll-commonmark-ghpages="" />    <span class="n">has</span> <span class="n">aspect_type</span><span class="p">,</span><br data-jekyll-commonmark-ghpages="" />    <span class="n">plays</span> <span class="n">ispropertytype</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" /><span class="n">aspect</span> <span class="nb">sub</span> <span class="n">entity</span><span class="p">,</span><br data-jekyll-commonmark-ghpages="" />    <span class="n">plays</span> <span class="n">hasproperty</span><span class="p">,</span><br data-jekyll-commonmark-ghpages="" />    <span class="n">plays</span> <span class="n">errorneousAspectValue</span><span class="p">,</span><br data-jekyll-commonmark-ghpages="" />    <span class="n">has</span> <span class="n">internal_reference</span><span class="p">,</span><br data-jekyll-commonmark-ghpages="" />    <span class="n">has</span> <span class="n">aspect_data_value</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" /><span class="n">property</span> <span class="nb">sub</span> <span class="n">relation</span><span class="p">,</span><br data-jekyll-commonmark-ghpages="" />   <span class="n">relates</span> <span class="n">hasproperty</span><span class="p">,</span><br data-jekyll-commonmark-ghpages="" />   <span class="n">relates</span> <span class="n">ispropertytype</span><span class="p">,</span><br data-jekyll-commonmark-ghpages="" />   <span class="n">relates</span> <span class="n">defines</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" /><span class="n">aspect_name</span> <span class="nb">sub</span> <span class="n">attribute</span><span class="p">,</span><br data-jekyll-commonmark-ghpages="" />   <span class="n">datatype</span> <span class="n">string</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" /><span class="n">aspect_description</span> <span class="nb">sub</span> <span class="n">attribute</span><span class="p">,</span><br data-jekyll-commonmark-ghpages="" />   <span class="n">datatype</span> <span class="n">string</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" /><span class="n">aspect_type</span> <span class="nb">sub</span> <span class="n">attribute</span><span class="p">,</span><br data-jekyll-commonmark-ghpages="" />   <span class="n">datatype</span> <span class="n">string</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" /><span class="n">aspect_data_value</span> <span class="nb">sub</span> <span class="n">attribute</span><span class="p">,</span><br data-jekyll-commonmark-ghpages="" />   <span class="n">datatype</span> <span class="n">string</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" /><span class="n">internal_reference</span> <span class="nb">sub</span> <span class="n">attribute</span><span class="p">,</span><br data-jekyll-commonmark-ghpages="" />   <span class="n">datatype</span> <span class="n">string</span><span class="p">;</span></pre></td></tr></tbody></table></code></pre></figure>

<p>So we’re first creating an aspect definition entity, and it is this
definition that allows us to handle all aspects (all attribute
types) in the same way (this where the entire Proof of Concept relies
on).  The definition has a name (which has to be unique, but what we
do not enforce in this example), it has a description, it has a type
(what is meant is the datatype like string or real, et cetera) and finally it can play the role of
property type in the relation that links an aspect to a
sysplantobject.</p>

<p>The next thing to define is the actual aspect (this is where we define
the value of the design aspect). It is tied to the relation that links
the aspect definition to the sysplantobject, thereby enabling to add a
value to an aspect definition that is a property of a sysplantobject.</p>

<p>After that the definitions of the attributes used in this part are defined.</p>

<p>This part of the schema now looks like this:</p>

<p><img src="/assets/images/Structure2c.png" alt="image" /></p>

<p>Then finally we’re coming the actual indication that there’s a pair of
aspects that should be the same, is actually different. For this a
simple relation is created:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1<br data-jekyll-commonmark-ghpages="" />2<br data-jekyll-commonmark-ghpages="" /></pre></td><td class="code"><pre><span class="n">alertDirectRelationPair</span> <span class="nb">sub</span> <span class="n">relation</span><span class="p">,</span><br data-jekyll-commonmark-ghpages="" />   <span class="n">relates</span> <span class="n">errorneousAspectValue</span><span class="p">;</span></pre></td></tr></tbody></table></code></pre></figure>

<p>This creates a relation is an alert for a two paired aspect values
that are incorrect. It is the aspect that can play this role, as
defined earlier (it plays the errorneousAspectValue role). Not that there is no reason to declare the two sides
of the relation separately, even though they will link to different
aspects. It is possible for each link of a relation to be used
multiple times in a single relation instance.</p>

<p>Finally the entire schema looks like this:</p>

<p><img src="/assets/images/Structure3.png" alt="image" /></p>

<h3 id="sample-data">Sample data</h3>

<p>In this section I’ll discuss the actual insertion of the data in the GRAKN graph. The data is
specifically created to illustrate the proof of the concept, so real
data will definitely look different. However the indicated principle
will in apply in use cases like this.</p>

<p>The source file for the data is available for download, see below in the download section.</p>

<p>In general there is a sequence of first deleting a object type, and
then inserting it, this helped in reloading the data during development of this example.</p>

<p>The systems, PlantObject and SysPlantObject are loaded:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1<br data-jekyll-commonmark-ghpages="" />2<br data-jekyll-commonmark-ghpages="" />3<br data-jekyll-commonmark-ghpages="" />4<br data-jekyll-commonmark-ghpages="" />5<br data-jekyll-commonmark-ghpages="" />6<br data-jekyll-commonmark-ghpages="" />7<br data-jekyll-commonmark-ghpages="" />8<br data-jekyll-commonmark-ghpages="" />9<br data-jekyll-commonmark-ghpages="" />10<br data-jekyll-commonmark-ghpages="" />11<br data-jekyll-commonmark-ghpages="" />12<br data-jekyll-commonmark-ghpages="" />13<br data-jekyll-commonmark-ghpages="" />14<br data-jekyll-commonmark-ghpages="" />15<br data-jekyll-commonmark-ghpages="" />16<br data-jekyll-commonmark-ghpages="" />17<br data-jekyll-commonmark-ghpages="" />18<br data-jekyll-commonmark-ghpages="" />19<br data-jekyll-commonmark-ghpages="" />20<br data-jekyll-commonmark-ghpages="" />21<br data-jekyll-commonmark-ghpages="" /></pre></td><td class="code"><pre><span class="n">match</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="nb">system</span><span class="p">;</span> <span class="n">delete</span> <span class="vg">$p</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="nb">system</span><span class="p">,</span> <span class="n">has</span> <span class="n">sysname</span> <span class="s2">"COMOS"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="nb">system</span><span class="p">,</span> <span class="n">has</span> <span class="n">sysname</span> <span class="s2">"E3D"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="nb">system</span><span class="p">,</span> <span class="n">has</span> <span class="n">sysname</span> <span class="s2">"SAPPDM"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" /><span class="n">match</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">plantobject</span><span class="p">;</span> <span class="n">delete</span> <span class="vg">$p</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">plantobject</span><span class="p">,</span> <span class="n">has</span> <span class="n">ident</span> <span class="s2">"1234ABCD"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">plantobject</span><span class="p">,</span> <span class="n">has</span> <span class="n">ident</span> <span class="s2">"3456ABCD"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">plantobject</span><span class="p">,</span> <span class="n">has</span> <span class="n">ident</span> <span class="s2">"7890ABCD"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">plantobject</span><span class="p">,</span> <span class="n">has</span> <span class="n">ident</span> <span class="s2">"5690ABCD"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" /><span class="n">match</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">sysplantobject</span><span class="p">;</span> <span class="n">delete</span> <span class="vg">$p</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">sysplantobject</span><span class="p">,</span> <span class="n">has</span> <span class="nb">name</span> <span class="s2">"2345-1234-3455"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">sysplantobject</span><span class="p">,</span> <span class="n">has</span> <span class="nb">name</span> <span class="s2">"2222-1234-3455"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">sysplantobject</span><span class="p">,</span> <span class="n">has</span> <span class="nb">name</span> <span class="s2">"3333-1234-3455"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">sysplantobject</span><span class="p">,</span> <span class="n">has</span> <span class="nb">name</span> <span class="s2">"4444-1234-3455"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">sysplantobject</span><span class="p">,</span> <span class="n">has</span> <span class="nb">name</span> <span class="s2">"5555-1234-3455"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">sysplantobject</span><span class="p">,</span> <span class="n">has</span> <span class="nb">name</span> <span class="s2">"6666-1234-3455"</span><span class="p">;</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Then a series of representations is loaded:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1<br data-jekyll-commonmark-ghpages="" />2<br data-jekyll-commonmark-ghpages="" />3<br data-jekyll-commonmark-ghpages="" />4<br data-jekyll-commonmark-ghpages="" />5<br data-jekyll-commonmark-ghpages="" />6<br data-jekyll-commonmark-ghpages="" />7<br data-jekyll-commonmark-ghpages="" />8<br data-jekyll-commonmark-ghpages="" />9<br data-jekyll-commonmark-ghpages="" /></pre></td><td class="code"><pre><span class="n">match</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">representation</span><span class="p">;</span> <span class="n">delete</span> <span class="vg">$p</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" /><span class="n">match</span><br data-jekyll-commonmark-ghpages="" />  <span class="vg">$sys</span> <span class="n">isa</span> <span class="nb">system</span><span class="p">,</span> <span class="n">has</span> <span class="n">sysname</span> <span class="s2">"COMOS"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <span class="vg">$sysplantobj</span> <span class="n">isa</span> <span class="n">sysplantobject</span><span class="p">,</span> <span class="n">has</span> <span class="nb">name</span> <span class="s2">"2345-1234-3455"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <span class="vg">$plantobject</span> <span class="n">isa</span> <span class="n">plantobject</span><span class="p">,</span> <span class="n">has</span> <span class="n">ident</span> <span class="s2">"1234ABCD"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span>  <span class="vg">$new</span><span class="o">-</span><span class="n">representation</span> <span class="p">(</span><span class="ss">represents: </span><span class="vg">$plantobject</span><span class="p">,</span> <span class="ss">representedby: </span><span class="vg">$sysplantobj</span><span class="p">,</span> <span class="ss">hasrepresentingsystem: </span><span class="vg">$sys</span><span class="p">)</span> <span class="n">isa</span> <span class="n">representation</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" /><span class="o">....</span></pre></td></tr></tbody></table></code></pre></figure>

<p>They indicate the representations of the plant objects in the mentioned systems</p>

<p>Then, the design aspects are defined:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1<br data-jekyll-commonmark-ghpages="" />2<br data-jekyll-commonmark-ghpages="" />3<br data-jekyll-commonmark-ghpages="" />4<br data-jekyll-commonmark-ghpages="" />5<br data-jekyll-commonmark-ghpages="" />6<br data-jekyll-commonmark-ghpages="" />7<br data-jekyll-commonmark-ghpages="" />8<br data-jekyll-commonmark-ghpages="" /></pre></td><td class="code"><pre><span class="n">match</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">aspect</span><span class="p">;</span> <span class="n">delete</span> <span class="vg">$p</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">aspect</span><span class="p">,</span> <span class="n">has</span> <span class="n">internal_reference</span> <span class="s2">"2345-1234-3455-documentnumber"</span><span class="p">,</span> <span class="n">has</span> <span class="n">aspect_data_value</span> <span class="s2">"Doc001"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">aspect</span><span class="p">,</span> <span class="n">has</span> <span class="n">internal_reference</span> <span class="s2">"2345-1234-3455-documentrevision"</span><span class="p">,</span> <span class="n">has</span> <span class="n">aspect_data_value</span> <span class="s2">"A"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">aspect</span><span class="p">,</span> <span class="n">has</span> <span class="n">internal_reference</span> <span class="s2">"2345-1234-3455-material"</span><span class="p">,</span> <span class="n">has</span> <span class="n">aspect_data_value</span> <span class="s2">"FE3610"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">aspect</span><span class="p">,</span> <span class="n">has</span> <span class="n">internal_reference</span> <span class="s2">"2345-1234-3455-type"</span><span class="p">,</span> <span class="n">has</span> <span class="n">aspect_data_value</span> <span class="s2">"GlobeValve"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" /><span class="o">....</span></pre></td></tr></tbody></table></code></pre></figure>

<p>After this, the aspects are linked to the representing sysplantobjects as properties:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1<br data-jekyll-commonmark-ghpages="" />2<br data-jekyll-commonmark-ghpages="" />3<br data-jekyll-commonmark-ghpages="" />4<br data-jekyll-commonmark-ghpages="" />5<br data-jekyll-commonmark-ghpages="" />6<br data-jekyll-commonmark-ghpages="" />7<br data-jekyll-commonmark-ghpages="" />8<br data-jekyll-commonmark-ghpages="" /></pre></td><td class="code"><pre><span class="n">match</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">property</span><span class="p">;</span> <span class="n">delete</span> <span class="vg">$p</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" /><span class="n">match</span><br data-jekyll-commonmark-ghpages="" />  <span class="vg">$sysplantobject</span> <span class="n">isa</span> <span class="n">sysplantobject</span><span class="p">,</span> <span class="n">has</span> <span class="nb">name</span> <span class="s2">"2345-1234-3455"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <span class="vg">$aspect</span> <span class="n">isa</span> <span class="n">aspect</span><span class="p">,</span> <span class="n">has</span> <span class="n">internal_reference</span> <span class="s2">"2345-1234-3455-documentnumber"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <span class="vg">$aspectdef</span> <span class="n">isa</span> <span class="n">aspect_definition</span><span class="p">,</span> <span class="n">has</span> <span class="n">aspect_name</span> <span class="s2">"documentnumber"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span>  <span class="vg">$new</span><span class="o">-</span><span class="n">property</span> <span class="p">(</span><span class="ss">defines: </span><span class="vg">$sysplantobject</span><span class="p">,</span> <span class="ss">hasproperty: </span><span class="vg">$aspect</span><span class="p">,</span> <span class="ss">ispropertytype: </span><span class="vg">$aspectdef</span><span class="p">)</span> <span class="n">isa</span> <span class="n">property</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><span class="o">....</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Everything else in the insert files can be ignored, these are remains of earlier experiments.</p>

<h3 id="the-rule">The Rule</h3>
<p>For the rule to work I’ve added some inconsistencies in the loaded data-set:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1<br data-jekyll-commonmark-ghpages="" />2<br data-jekyll-commonmark-ghpages="" />3<br data-jekyll-commonmark-ghpages="" />4<br data-jekyll-commonmark-ghpages="" />5<br data-jekyll-commonmark-ghpages="" />6<br data-jekyll-commonmark-ghpages="" />7<br data-jekyll-commonmark-ghpages="" />8<br data-jekyll-commonmark-ghpages="" />9<br data-jekyll-commonmark-ghpages="" />10<br data-jekyll-commonmark-ghpages="" />11<br data-jekyll-commonmark-ghpages="" />12<br data-jekyll-commonmark-ghpages="" />13<br data-jekyll-commonmark-ghpages="" />14<br data-jekyll-commonmark-ghpages="" />15<br data-jekyll-commonmark-ghpages="" />16<br data-jekyll-commonmark-ghpages="" />17<br data-jekyll-commonmark-ghpages="" />18<br data-jekyll-commonmark-ghpages="" />19<br data-jekyll-commonmark-ghpages="" />20<br data-jekyll-commonmark-ghpages="" />21<br data-jekyll-commonmark-ghpages="" />22<br data-jekyll-commonmark-ghpages="" />23<br data-jekyll-commonmark-ghpages="" />24<br data-jekyll-commonmark-ghpages="" />25<br data-jekyll-commonmark-ghpages="" />26<br data-jekyll-commonmark-ghpages="" />27<br data-jekyll-commonmark-ghpages="" />28<br data-jekyll-commonmark-ghpages="" />29<br data-jekyll-commonmark-ghpages="" /></pre></td><td class="code"><pre><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">aspect</span><span class="p">,</span> <span class="n">has</span> <span class="n">internal_reference</span> <span class="s2">"2345-1234-3455-documentnumber"</span><span class="p">,</span> <span class="n">has</span> <span class="n">aspect_data_value</span> <span class="s2">"Doc001"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">aspect</span><span class="p">,</span> <span class="n">has</span> <span class="n">internal_reference</span> <span class="s2">"2345-1234-3455-documentrevision"</span><span class="p">,</span> <span class="n">has</span> <span class="n">aspect_data_value</span> <span class="s2">"A"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">aspect</span><span class="p">,</span> <span class="n">has</span> <span class="n">internal_reference</span> <span class="s2">"2345-1234-3455-material"</span><span class="p">,</span> <span class="n">has</span> <span class="n">aspect_data_value</span> <span class="s2">"FE3610"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">aspect</span><span class="p">,</span> <span class="n">has</span> <span class="n">internal_reference</span> <span class="s2">"2345-1234-3455-type"</span><span class="p">,</span> <span class="n">has</span> <span class="n">aspect_data_value</span> <span class="s2">"GlobeValve"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">aspect</span><span class="p">,</span> <span class="n">has</span> <span class="n">internal_reference</span> <span class="s2">"2222-1234-3455-documentnumber"</span><span class="p">,</span> <span class="n">has</span> <span class="n">aspect_data_value</span> <span class="s2">"Doc001"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">aspect</span><span class="p">,</span> <span class="n">has</span> <span class="n">internal_reference</span> <span class="s2">"2222-1234-3455-documentrevision"</span><span class="p">,</span> <span class="n">has</span> <span class="n">aspect_data_value</span> <span class="s2">"A"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">aspect</span><span class="p">,</span> <span class="n">has</span> <span class="n">internal_reference</span> <span class="s2">"2222-1234-3455-material"</span><span class="p">,</span> <span class="n">has</span> <span class="n">aspect_data_value</span> <span class="s2">"FE360"</span><span class="p">;</span> <br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">aspect</span><span class="p">,</span> <span class="n">has</span> <span class="n">internal_reference</span> <span class="s2">"2222-1234-3455-type"</span><span class="p">,</span> <span class="n">has</span> <span class="n">aspect_data_value</span> <span class="s2">"GlobeValve"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">aspect</span><span class="p">,</span> <span class="n">has</span> <span class="n">internal_reference</span> <span class="s2">"3333-1234-3455-documentnumber"</span><span class="p">,</span> <span class="n">has</span> <span class="n">aspect_data_value</span> <span class="s2">"Doc001"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">aspect</span><span class="p">,</span> <span class="n">has</span> <span class="n">internal_reference</span> <span class="s2">"3333-1234-3455-documentrevision"</span><span class="p">,</span> <span class="n">has</span> <span class="n">aspect_data_value</span> <span class="s2">"A"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">aspect</span><span class="p">,</span> <span class="n">has</span> <span class="n">internal_reference</span> <span class="s2">"3333-1234-3455-material"</span><span class="p">,</span> <span class="n">has</span> <span class="n">aspect_data_value</span> <span class="s2">"FE371"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">aspect</span><span class="p">,</span> <span class="n">has</span> <span class="n">internal_reference</span> <span class="s2">"3333-1234-3455-type"</span><span class="p">,</span> <span class="n">has</span> <span class="n">aspect_data_value</span> <span class="s2">"GlobeValve"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">aspect</span><span class="p">,</span> <span class="n">has</span> <span class="n">internal_reference</span> <span class="s2">"4444-1234-3455-documentnumber"</span><span class="p">,</span> <span class="n">has</span> <span class="n">aspect_data_value</span> <span class="s2">"Doc001"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">aspect</span><span class="p">,</span> <span class="n">has</span> <span class="n">internal_reference</span> <span class="s2">"4444-1234-3455-documentrevision"</span><span class="p">,</span> <span class="n">has</span> <span class="n">aspect_data_value</span> <span class="s2">"A"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">aspect</span><span class="p">,</span> <span class="n">has</span> <span class="n">internal_reference</span> <span class="s2">"4444-1234-3455-material"</span><span class="p">,</span> <span class="n">has</span> <span class="n">aspect_data_value</span> <span class="s2">"FE370"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">aspect</span><span class="p">,</span> <span class="n">has</span> <span class="n">internal_reference</span> <span class="s2">"4444-1234-3455-type"</span><span class="p">,</span> <span class="n">has</span> <span class="n">aspect_data_value</span> <span class="s2">"GlobeValve"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">aspect</span><span class="p">,</span> <span class="n">has</span> <span class="n">internal_reference</span> <span class="s2">"5555-1234-3455-documentnumber"</span><span class="p">,</span> <span class="n">has</span> <span class="n">aspect_data_value</span> <span class="s2">"Doc001"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">aspect</span><span class="p">,</span> <span class="n">has</span> <span class="n">internal_reference</span> <span class="s2">"5555-1234-3455-documentrevision"</span><span class="p">,</span> <span class="n">has</span> <span class="n">aspect_data_value</span> <span class="s2">"A"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">aspect</span><span class="p">,</span> <span class="n">has</span> <span class="n">internal_reference</span> <span class="s2">"5555-1234-3455-material"</span><span class="p">,</span> <span class="n">has</span> <span class="n">aspect_data_value</span> <span class="s2">"FE370"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">aspect</span><span class="p">,</span> <span class="n">has</span> <span class="n">internal_reference</span> <span class="s2">"5555-1234-3455-type"</span><span class="p">,</span> <span class="n">has</span> <span class="n">aspect_data_value</span> <span class="s2">"GlobeValve"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">aspect</span><span class="p">,</span> <span class="n">has</span> <span class="n">internal_reference</span> <span class="s2">"6666-1234-3455-documentnumber"</span><span class="p">,</span> <span class="n">has</span> <span class="n">aspect_data_value</span> <span class="s2">"Doc001"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">aspect</span><span class="p">,</span> <span class="n">has</span> <span class="n">internal_reference</span> <span class="s2">"6666-1234-3455-documentrevision"</span><span class="p">,</span> <span class="n">has</span> <span class="n">aspect_data_value</span> <span class="s2">"A"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">aspect</span><span class="p">,</span> <span class="n">has</span> <span class="n">internal_reference</span> <span class="s2">"6666-1234-3455-material"</span><span class="p">,</span> <span class="n">has</span> <span class="n">aspect_data_value</span> <span class="s2">"FE360"</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><span class="n">insert</span> <span class="vg">$p</span> <span class="n">isa</span> <span class="n">aspect</span><span class="p">,</span> <span class="n">has</span> <span class="n">internal_reference</span> <span class="s2">"6666-1234-3455-type"</span><span class="p">,</span> <span class="n">has</span> <span class="n">aspect_data_value</span> <span class="s2">"GlobeValve"</span><span class="p">;</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Line 3 and 7 show a discrepancy, as do 13 and 18 and 23.</p>

<p>I’ve developed the rule by first creating a query that returns the erroneous objects:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1<br data-jekyll-commonmark-ghpages="" />2<br data-jekyll-commonmark-ghpages="" />3<br data-jekyll-commonmark-ghpages="" />4<br data-jekyll-commonmark-ghpages="" />5<br data-jekyll-commonmark-ghpages="" />6<br data-jekyll-commonmark-ghpages="" />7<br data-jekyll-commonmark-ghpages="" />8<br data-jekyll-commonmark-ghpages="" />9<br data-jekyll-commonmark-ghpages="" />10<br data-jekyll-commonmark-ghpages="" />11<br data-jekyll-commonmark-ghpages="" />12<br data-jekyll-commonmark-ghpages="" />13<br data-jekyll-commonmark-ghpages="" />14<br data-jekyll-commonmark-ghpages="" />15<br data-jekyll-commonmark-ghpages="" />16<br data-jekyll-commonmark-ghpages="" />17<br data-jekyll-commonmark-ghpages="" />18<br data-jekyll-commonmark-ghpages="" />19<br data-jekyll-commonmark-ghpages="" />20<br data-jekyll-commonmark-ghpages="" />21<br data-jekyll-commonmark-ghpages="" />22<br data-jekyll-commonmark-ghpages="" />23<br data-jekyll-commonmark-ghpages="" />24<br data-jekyll-commonmark-ghpages="" />25<br data-jekyll-commonmark-ghpages="" />26<br data-jekyll-commonmark-ghpages="" />27<br data-jekyll-commonmark-ghpages="" /></pre></td><td class="code"><pre><span class="n">match</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" />  <span class="p">(</span><span class="ss">hasproperty: </span><span class="vg">$a1</span><span class="p">,</span> <span class="ss">defines: </span><span class="vg">$spo1</span><span class="p">,</span> <span class="ss">ispropertytype: </span><span class="vg">$ptype1</span><span class="p">)</span> <span class="n">isa</span> <span class="n">property</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <span class="vg">$a1</span> <span class="n">has</span> <span class="n">aspect_data_value</span> <span class="vg">$adv1</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <span class="vg">$a1</span> <span class="n">has</span> <span class="n">internal_reference</span> <span class="vg">$intref1</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <span class="vg">$ptype1</span> <span class="n">has</span> <span class="n">aspect_name</span> <span class="vg">$aname1</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <span class="p">(</span><span class="ss">representedby: </span><span class="vg">$spo1</span><span class="p">,</span> <span class="ss">represents: </span><span class="vg">$po1</span><span class="p">,</span> <span class="ss">hasrepresentingsystem: </span><span class="vg">$sys1</span><span class="p">)</span> <span class="n">isa</span> <span class="n">representation</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <span class="vg">$po1</span> <span class="n">has</span> <span class="n">ident</span> <span class="vg">$po_ident1</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <span class="vg">$spo1</span> <span class="n">has</span> <span class="nb">name</span> <span class="vg">$spo1name</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <span class="vg">$sys1</span> <span class="n">has</span> <span class="n">sysname</span> <span class="vg">$sysname1</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" />  <span class="p">(</span><span class="ss">hasproperty: </span><span class="vg">$a2</span><span class="p">,</span> <span class="ss">defines: </span><span class="vg">$spo2</span><span class="p">,</span> <span class="ss">ispropertytype: </span><span class="vg">$ptype2</span><span class="p">)</span> <span class="n">isa</span> <span class="n">property</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <span class="vg">$a2</span> <span class="n">has</span> <span class="n">aspect_data_value</span> <span class="vg">$adv2</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <span class="vg">$a2</span> <span class="n">has</span> <span class="n">internal_reference</span> <span class="vg">$intref2</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <span class="vg">$ptype2</span> <span class="n">has</span> <span class="n">aspect_name</span> <span class="vg">$aname2</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <span class="p">(</span><span class="ss">representedby: </span><span class="vg">$spo2</span><span class="p">,</span> <span class="ss">represents: </span><span class="vg">$po2</span><span class="p">,</span> <span class="ss">hasrepresentingsystem: </span><span class="vg">$sys2</span><span class="p">)</span> <span class="n">isa</span> <span class="n">representation</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <span class="vg">$po2</span> <span class="n">has</span> <span class="n">ident</span> <span class="vg">$po_ident2</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <span class="vg">$spo2</span> <span class="n">has</span> <span class="nb">name</span> <span class="vg">$spo2name</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <span class="vg">$sys2</span> <span class="n">has</span> <span class="n">sysname</span> <span class="vg">$sysname2</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <br data-jekyll-commonmark-ghpages="" />  <span class="vg">$po_ident1</span> <span class="o">==</span> <span class="vg">$po_ident2</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <span class="vg">$aname1</span> <span class="o">==</span> <span class="vg">$aname2</span> <span class="p">;</span> <br data-jekyll-commonmark-ghpages="" />  <span class="vg">$adv1</span> <span class="o">!=</span> <span class="vg">$adv2</span> <span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <span class="vg">$spo1name</span> <span class="o">!=</span> <span class="vg">$spo2name</span> <span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <br data-jekyll-commonmark-ghpages="" /><span class="n">get</span> <span class="vg">$adv1</span><span class="p">,</span> <span class="vg">$adv2</span><span class="p">,</span> <span class="vg">$sysname1</span><span class="p">,</span> <span class="vg">$sysname2</span><span class="p">,</span> <span class="vg">$po_ident1</span><span class="p">,</span> <span class="vg">$po_ident2</span><span class="p">,</span> <span class="vg">$intref1</span><span class="p">,</span> <span class="vg">$intref2</span><span class="p">;</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Which results in the following result:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1<br data-jekyll-commonmark-ghpages="" />2<br data-jekyll-commonmark-ghpages="" />3<br data-jekyll-commonmark-ghpages="" />4<br data-jekyll-commonmark-ghpages="" />5<br data-jekyll-commonmark-ghpages="" />6<br data-jekyll-commonmark-ghpages="" />7<br data-jekyll-commonmark-ghpages="" />8<br data-jekyll-commonmark-ghpages="" /></pre></td><td class="code"><pre><span class="c1"># {$po_ident1 "1234ABCD" isa ident; $adv2 "FE360" isa aspect_data_value; $po_ident2 "1234ABCD" isa ident; $adv1 "FE3610" isa aspect_data_value; $sysname2 "E3D" isa sysname; $sysname1 "COMOS" isa sysname;}</span><br data-jekyll-commonmark-ghpages="" /><span class="c1"># {$po_ident1 "1234ABCD" isa ident; $adv2 "FE3610" isa aspect_data_value; $po_ident2 "1234ABCD" isa ident; $adv1 "FE360" isa aspect_data_value; $sysname2 "COMOS" isa sysname; $sysname1 "E3D" isa sysname;}</span><br data-jekyll-commonmark-ghpages="" /><span class="c1"># {$po_ident1 "3456ABCD" isa ident; $adv2 "FE371" isa aspect_data_value; $po_ident2 "3456ABCD" isa ident; $adv1 "FE370" isa aspect_data_value; $sysname2 "COMOS" isa sysname; $sysname1 "E3D" isa sysname;}</span><br data-jekyll-commonmark-ghpages="" /><span class="c1"># {$po_ident1 "3456ABCD" isa ident; $adv2 "FE371" isa aspect_data_value; $po_ident2 "3456ABCD" isa ident; $adv1 "FE360" isa aspect_data_value; $sysname2 "COMOS" isa sysname; $sysname1 "SAPPDM" isa sysname;}</span><br data-jekyll-commonmark-ghpages="" /><span class="c1"># {$po_ident1 "3456ABCD" isa ident; $adv2 "FE370" isa aspect_data_value; $po_ident2 "3456ABCD" isa ident; $adv1 "FE371" isa aspect_data_value; $sysname2 "E3D" isa sysname; $sysname1 "COMOS" isa sysname;}</span><br data-jekyll-commonmark-ghpages="" /><span class="c1"># {$po_ident1 "3456ABCD" isa ident; $adv2 "FE370" isa aspect_data_value; $po_ident2 "3456ABCD" isa ident; $adv1 "FE360" isa aspect_data_value; $sysname2 "E3D" isa sysname; $sysname1 "SAPPDM" isa sysname;}</span><br data-jekyll-commonmark-ghpages="" /><span class="c1"># {$po_ident1 "3456ABCD" isa ident; $adv2 "FE360" isa aspect_data_value; $po_ident2 "3456ABCD" isa ident; $adv1 "FE371" isa aspect_data_value; $sysname2 "SAPPDM" isa sysname; $sysname1 "COMOS" isa sysname;}</span><br data-jekyll-commonmark-ghpages="" /><span class="c1"># {$po_ident1 "3456ABCD" isa ident; $adv2 "FE360" isa aspect_data_value; $po_ident2 "3456ABCD" isa ident; $adv1 "FE370" isa aspect_data_value; $sysname2 "SAPPDM" isa sysname; $sysname1 "E3D" isa sysname;}</span></pre></td></tr></tbody></table></code></pre></figure>

<p>The interesting thing is that, although the results here show the error twice for each difference (from A to B and from B to A), when implemented as a rule, the relation is only made once (which is exactly what we want).</p>

<h3 id="the-rule-implemented">The Rule Implemented</h3>

<p>Here’s the rule:</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1<br data-jekyll-commonmark-ghpages="" />2<br data-jekyll-commonmark-ghpages="" />3<br data-jekyll-commonmark-ghpages="" />4<br data-jekyll-commonmark-ghpages="" />5<br data-jekyll-commonmark-ghpages="" />6<br data-jekyll-commonmark-ghpages="" />7<br data-jekyll-commonmark-ghpages="" />8<br data-jekyll-commonmark-ghpages="" />9<br data-jekyll-commonmark-ghpages="" />10<br data-jekyll-commonmark-ghpages="" />11<br data-jekyll-commonmark-ghpages="" />12<br data-jekyll-commonmark-ghpages="" />13<br data-jekyll-commonmark-ghpages="" />14<br data-jekyll-commonmark-ghpages="" />15<br data-jekyll-commonmark-ghpages="" />16<br data-jekyll-commonmark-ghpages="" />17<br data-jekyll-commonmark-ghpages="" />18<br data-jekyll-commonmark-ghpages="" />19<br data-jekyll-commonmark-ghpages="" />20<br data-jekyll-commonmark-ghpages="" />21<br data-jekyll-commonmark-ghpages="" />22<br data-jekyll-commonmark-ghpages="" />23<br data-jekyll-commonmark-ghpages="" />24<br data-jekyll-commonmark-ghpages="" />25<br data-jekyll-commonmark-ghpages="" />26<br data-jekyll-commonmark-ghpages="" />27<br data-jekyll-commonmark-ghpages="" />28<br data-jekyll-commonmark-ghpages="" />29<br data-jekyll-commonmark-ghpages="" />30<br data-jekyll-commonmark-ghpages="" />31<br data-jekyll-commonmark-ghpages="" />32<br data-jekyll-commonmark-ghpages="" />33<br data-jekyll-commonmark-ghpages="" />34<br data-jekyll-commonmark-ghpages="" /></pre></td><td class="code"><pre><span class="n">define</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" /><span class="n">aspect</span><span class="o">-</span><span class="n">error</span> <span class="nb">sub</span> <span class="n">rule</span><span class="p">,</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" /><span class="k">when</span> <span class="p">{</span><br data-jekyll-commonmark-ghpages="" />  <span class="p">(</span><span class="ss">hasproperty: </span><span class="vg">$a1</span><span class="p">,</span> <span class="ss">defines: </span><span class="vg">$spo1</span><span class="p">,</span> <span class="ss">ispropertytype: </span><span class="vg">$ptype1</span><span class="p">)</span> <span class="n">isa</span> <span class="n">property</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <span class="vg">$a1</span> <span class="n">has</span> <span class="n">aspect_data_value</span> <span class="vg">$adv1</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <span class="vg">$a1</span> <span class="n">has</span> <span class="n">internal_reference</span> <span class="vg">$intref1</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <span class="vg">$ptype1</span> <span class="n">has</span> <span class="n">aspect_name</span> <span class="vg">$aname1</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <span class="p">(</span><span class="ss">representedby: </span><span class="vg">$spo1</span><span class="p">,</span> <span class="ss">represents: </span><span class="vg">$po1</span><span class="p">,</span> <span class="ss">hasrepresentingsystem: </span><span class="vg">$sys1</span><span class="p">)</span> <span class="n">isa</span> <span class="n">representation</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <span class="vg">$po1</span> <span class="n">has</span> <span class="n">ident</span> <span class="vg">$po_ident1</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <span class="vg">$spo1</span> <span class="n">has</span> <span class="nb">name</span> <span class="vg">$spo1name</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <span class="vg">$sys1</span> <span class="n">has</span> <span class="n">sysname</span> <span class="vg">$sysname1</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" />  <span class="p">(</span><span class="ss">hasproperty: </span><span class="vg">$a2</span><span class="p">,</span> <span class="ss">defines: </span><span class="vg">$spo2</span><span class="p">,</span> <span class="ss">ispropertytype: </span><span class="vg">$ptype2</span><span class="p">)</span> <span class="n">isa</span> <span class="n">property</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <span class="vg">$a2</span> <span class="n">has</span> <span class="n">aspect_data_value</span> <span class="vg">$adv2</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <span class="vg">$a2</span> <span class="n">has</span> <span class="n">internal_reference</span> <span class="vg">$intref2</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <span class="vg">$ptype2</span> <span class="n">has</span> <span class="n">aspect_name</span> <span class="vg">$aname2</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <span class="p">(</span><span class="ss">representedby: </span><span class="vg">$spo2</span><span class="p">,</span> <span class="ss">represents: </span><span class="vg">$po2</span><span class="p">,</span> <span class="ss">hasrepresentingsystem: </span><span class="vg">$sys2</span><span class="p">)</span> <span class="n">isa</span> <span class="n">representation</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <span class="vg">$po2</span> <span class="n">has</span> <span class="n">ident</span> <span class="vg">$po_ident2</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <span class="vg">$spo2</span> <span class="n">has</span> <span class="nb">name</span> <span class="vg">$spo2name</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <span class="vg">$sys2</span> <span class="n">has</span> <span class="n">sysname</span> <span class="vg">$sysname2</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <br data-jekyll-commonmark-ghpages="" />  <span class="vg">$po_ident1</span> <span class="o">==</span> <span class="vg">$po_ident2</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <span class="vg">$aname1</span> <span class="o">==</span> <span class="vg">$aname2</span> <span class="p">;</span> <br data-jekyll-commonmark-ghpages="" />  <span class="vg">$adv1</span> <span class="o">!=</span> <span class="vg">$adv2</span> <span class="p">;</span><br data-jekyll-commonmark-ghpages="" />  <span class="vg">$spo1name</span> <span class="o">!=</span> <span class="vg">$spo2name</span> <span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" /><span class="p">},</span> <span class="k">then</span> <span class="p">{</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" />     <span class="p">(</span><span class="ss">errorneousAspectValue: </span><span class="vg">$a1</span><span class="p">,</span> <span class="ss">errorneousAspectValue: </span><span class="vg">$a2</span><span class="p">)</span> <span class="n">isa</span> <span class="n">alertDirectRelationPair</span><span class="p">;</span><br data-jekyll-commonmark-ghpages="" /><br data-jekyll-commonmark-ghpages="" /><span class="p">};</span></pre></td></tr></tbody></table></code></pre></figure>

<p>In production situations the debugging code, that was part of the original query should probably be removed.</p>

<h3 id="proving-of-the-concept">Proving of the concept</h3>
<p>Now, does it all work?</p>

<p>Screenshot  from the GRAKN workbench:</p>

<p><img src="/assets/images/ruleresult.png" alt="image" /></p>

<p>Indeed we see the expected results. And note: there is no reference to any specific aspect in the code. This means the check will continue to work when we expand the aspect types.</p>

<h2 id="concluding-notes">Concluding notes</h2>

<p>In the previous chapter the concept of generic data quality rules is
proven to be feasible.  In doing this, I learned that the
graphical representation of the data is essential to be able to
actuelly work work with it. Building a schema in GRAKN is different to
building a schema in a relational database, because you do not get the
structure that a relational database (like tables and keys) provides
from the start.  A second thing I discovered: the .gql language is
quite harsh at the moment to work with. There are Java stack-traces when there
is an error, difficult to understand error messages, etc. The way
forward was found in creating the examples in very small steps and
verifying each simple step before continuing with the next one. The
example scripts from GRAKN themselves ( see <a href="https://dev.grakn.ai/docs/files/social-network/schema.gql">here</a> ) are quite helpful here as well.</p>

<p>Overall however, the GRAKN environment offers an unmatched functionality in knowledge representation in data rich environments.</p>

<h2 id="downloads">Downloads</h2>

<p>You can download the source files, if you want to experiment with this:</p>
<ul>
  <li>The <a href="/downloads/GRAKN/Alert_Object.gql">Schema file</a></li>
  <li>The <a href="/downloads/GRAKN/insert_data.gql">Data file</a></li>
  <li>The <a href="/downloads/GRAKN/insert_error_rule.gql">Rule definition</a></li>
</ul>

<h2 id="alternative-solutions">Alternative solutions</h2>
<p>Peter Crocker writes in this
<a href="https://towardsdatascience.com/the-intuitions-behind-knowledge-graphs-and-reasoning-59df2f1ad054">article</a>
about RDFox, that allows reasoning in much the same way on RDF graphs.</p>


      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            
            <a href="/tag/#/GRAKN%2C" rel="tag"># GRAKN,</a>
          
            
            <a href="/tag/#/applied" rel="tag"># applied</a>
          
            
            <a href="/tag/#/semantic" rel="tag"># semantic</a>
          
            
            <a href="/tag/#/technology" rel="tag"># technology</a>
          
        </div>
      

      
      
      
      
      

      
      
        <div class="post-nav" id="post-nav-id">
          <div class="post-nav-next post-nav-item">
            
              <a href="/what%20i%20think/2020/05/17/The-Single-Source-Of-The-Truth/" rel="next" title="The single source of the truth">
                <i class="fa fa-chevron-left"></i> The single source of the truth
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/what%20i%20think/2020/02/16/sharing-creates-value/" rel="prev" title="Sharing creates value">
                Sharing creates value <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      
      

      
    </footer>
  </article>

  <div class="post-spread">
    
  </div>
</div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          

  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      
        
        
        




      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/assets/images/avatar.gif"
               alt="Gert-Jan Aaftink" />
          <p class="site-author-name" itemprop="name">Gert-Jan Aaftink</p>
           
              <p class="site-description motion-element" itemprop="description">Digitalization and transformation in projects</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">10</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/">
                <span class="site-state-item-count">4</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/">
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        
        
        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              
              
              <span class="links-of-author-item">
                <a href="https://www.linkedin.com/in/gert-jan-aaftink-7009543" target="_blank" title="LinkedIn">
                  
                    <i class="fa fa-fw fa-linkedin"></i>
                  
                  LinkedIn
                </a>
              </span>
            
              
              
              <span class="links-of-author-item">
                <a href="https://twitter.com/px_gja" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
              
              
              <span class="links-of-author-item">
                <a href="https://github.com/gjaaf" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              
              
              <span class="links-of-author-item">
                <a href="mailto:gja@px-alpha.com" target="_blank" title="MailTo">
                  
                    <i class="fa fa-fw fa-envelope"></i>
                  
                  MailTo
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            





            
              <div class="post-toc-content">
    <ol class=nav>
      <li class="nav-item nav-level-2"> <a class="nav-link" href="#introduction"> <span class="nav-number">1</span> <span class="nav-text">Introduction</span> </a> <ol class="nav-child"> <ol class="nav-child"> <ol class="nav-child"> <ol class="nav-child"> </li></ol> </li></ol> </li></ol> </li></ol> </li> <li class="nav-item nav-level-2"> <a class="nav-link" href="#grakn"> <span class="nav-number">2</span> <span class="nav-text">GRAKN</span> </a> <ol class="nav-child"> <ol class="nav-child"> <ol class="nav-child"> <ol class="nav-child"> </li></ol> </li></ol> </li></ol> </li></ol> </li> <li class="nav-item nav-level-2"> <a class="nav-link" href="#outline-of-this-article"> <span class="nav-number">3</span> <span class="nav-text">Outline of this article</span> </a> <ol class="nav-child"> <ol class="nav-child"> <ol class="nav-child"> <ol class="nav-child"> </li></ol> </li></ol> </li></ol> </li></ol> </li> <li class="nav-item nav-level-2"> <a class="nav-link" href="#introducing"> <span class="nav-number">4</span> <span class="nav-text">Introducing</span> </a> <ol class="nav-child"> <li class="nav-item nav-level-3"> <a class="nav-link" href="#data-structure"> <span class="nav-number">4.1</span> <span class="nav-text">Data structure</span> </a> <ol class="nav-child"> <li class="nav-item nav-level-4"> <a class="nav-link" href="#plantobject"> <span class="nav-number">4.1.1</span> <span class="nav-text">PlantObject</span> </a> <ol class="nav-child"> <ol class="nav-child"> </li></ol> </li></ol> </li> <li class="nav-item nav-level-4"> <a class="nav-link" href="#sysplantobject-and-system"> <span class="nav-number">4.1.2</span> <span class="nav-text">SysPlantObject and System</span> </a> <ol class="nav-child"> <ol class="nav-child"> </li></ol> </li></ol> </li></ol> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#sample-data"> <span class="nav-number">4.2</span> <span class="nav-text">Sample data</span> </a> <ol class="nav-child"> <ol class="nav-child"> <ol class="nav-child"> </li></ol> </li></ol> </li></ol> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#the-rule"> <span class="nav-number">4.3</span> <span class="nav-text">The Rule</span> </a> <ol class="nav-child"> <ol class="nav-child"> <ol class="nav-child"> </li></ol> </li></ol> </li></ol> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#the-rule-implemented"> <span class="nav-number">4.4</span> <span class="nav-text">The Rule Implemented</span> </a> <ol class="nav-child"> <ol class="nav-child"> <ol class="nav-child"> </li></ol> </li></ol> </li></ol> </li> <li class="nav-item nav-level-3"> <a class="nav-link" href="#proving-of-the-concept"> <span class="nav-number">4.5</span> <span class="nav-text">Proving of the concept</span> </a> <ol class="nav-child"> <ol class="nav-child"> <ol class="nav-child"> </li></ol> </li></ol> </li></ol> </li></ol> </li> <li class="nav-item nav-level-2"> <a class="nav-link" href="#concluding-notes"> <span class="nav-number">5</span> <span class="nav-text">Concluding notes</span> </a> <ol class="nav-child"> <ol class="nav-child"> <ol class="nav-child"> <ol class="nav-child"> </li></ol> </li></ol> </li></ol> </li></ol> </li> <li class="nav-item nav-level-2"> <a class="nav-link" href="#downloads"> <span class="nav-number">6</span> <span class="nav-text">Downloads</span> </a> <ol class="nav-child"> <ol class="nav-child"> <ol class="nav-child"> <ol class="nav-child"> </li></ol> </li></ol> </li></ol> </li></ol> </li> <li class="nav-item nav-level-2"> <a class="nav-link" href="#alternative-solutions"> <span class="nav-number">7</span> <span class="nav-text">Alternative solutions</span> </a> <ol class="nav-child"> <ol class="nav-child"> <ol class="nav-child"> <ol class="nav-child">
    </ol>
  </div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>

        
      </div>
      

<style>
#share-buttons {display: inline-block; vertical-align: middle;  }
#share-buttons:after {content: ""; display: block; clear: both; }
#share-buttons > div {
    position: relative;
    text-align: left; 
    height: 36px; 
    width: 32px; 
    float: left; 
    text-align: center;
}
#share-buttons > div > svg {height: 16px; fill: #d5d5d5; margin-top: 10px;}
#share-buttons > div:hover {cursor: pointer;}
#share-buttons > div.facebook:hover > svg {fill: #3B5998;}
#share-buttons > div.twitter:hover > svg {fill: #55ACEE;}
#share-buttons > div.linkedin:hover > svg {fill: #0077b5;}
#share-buttons > div.pinterest:hover > svg {fill: #CB2027;}
#share-buttons > div.gplus:hover > svg {fill: #dd4b39;}
#share-buttons > div.mail:hover > svg {fill: #7D7D7D;}
#share-buttons > div.instagram:hover > svg {fill: #C73B92;}
#share-buttons > div.facebook > svg {height: 18px; margin-top: 9px;}
#share-buttons > div.twitter > svg {height: 20px; margin-top: 8px;}
#share-buttons > div.linkedin > svg {height: 19px; margin-top: 7px;}
#share-buttons > div.pinterest > svg {height: 20px; margin-top: 9px;}
#share-buttons > div.gplus > svg {height: 17px; margin-top: 9px; position: relative; left: 1px;}
#share-buttons > div.mail > svg {height: 14px; margin-top: 11px;}

#share-buttons-spacer {height: 30px;}

</style>

<div style="width: 700px; margin: 0 auto ;">

<span style="color: silver;">Share on: </span>

<div id="share-buttons">
<!--    <div class="facebook" title="Share this on Facebook" onclick="window.open('http://www.facebook.com/share.php?u=http://localhost:4000/what%20i%20research/2020/05/13/A-taste-of-GRAKN/');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759h-306v-759h-255v-296h255v-218q0-186 104-288.5t277-102.5q147 0 228 12z"/></svg></div> 
-->
  
    <div class="twitter" title="Share this on Twitter" onclick="window.open('http://twitter.com/home?status=http://localhost:4000/what%20i%20research/2020/05/13/A-taste-of-GRAKN/');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1684 408q-67 98-162 167 1 14 1 42 0 130-38 259.5t-115.5 248.5-184.5 210.5-258 146-323 54.5q-271 0-496-145 35 4 78 4 225 0 401-138-105-2-188-64.5t-114-159.5q33 5 61 5 43 0 85-11-112-23-185.5-111.5t-73.5-205.5v-4q68 38 146 41-66-44-105-115t-39-154q0-88 44-163 121 149 294.5 238.5t371.5 99.5q-8-38-8-74 0-134 94.5-228.5t228.5-94.5q140 0 236 102 109-21 205-78-37 115-142 178 93-10 186-50z"/></svg></div>

    <div class="linkedin" title="Share this on Linkedin" onclick="window.open('https://www.linkedin.com/shareArticle?mini=true&url=http://localhost:4000/what%20i%20research/2020/05/13/A-taste-of-GRAKN/&title=&summary=&source=');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M477 625v991h-330v-991h330zm21-306q1 73-50.5 122t-135.5 49h-2q-82 0-132-49t-50-122q0-74 51.5-122.5t134.5-48.5 133 48.5 51 122.5zm1166 729v568h-329v-530q0-105-40.5-164.5t-126.5-59.5q-63 0-105.5 34.5t-63.5 85.5q-11 30-11 81v553h-329q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5 114.5-15.5q171 0 275 113.5t104 332.5z"/></svg></div>

    

<!--    <div class="gplus" title="Share this on Google Plus" onclick="window.open('https://plus.google.com/share?url=http://localhost:4000/what%20i%20research/2020/05/13/A-taste-of-GRAKN/');"><svg viewBox="0 0 2304 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1437 913q0 208-87 370.5t-248 254-369 91.5q-149 0-285-58t-234-156-156-234-58-285 58-285 156-234 234-156 285-58q286 0 491 192l-199 191q-117-113-292-113-123 0-227.5 62t-165.5 168.5-61 232.5 61 232.5 165.5 168.5 227.5 62q83 0 152.5-23t114.5-57.5 78.5-78.5 49-83 21.5-74h-416v-252h692q12 63 12 122zm867-122v210h-209v209h-210v-209h-209v-210h209v-209h210v209h209z"/></svg></div>
-->

<div class="mail" title="Share this through Email" onclick="window.open('mailto:?&body=http://localhost:4000/what%20i%20research/2020/05/13/A-taste-of-GRAKN/');"><svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1792 710v794q0 66-47 113t-113 47h-1472q-66 0-113-47t-47-113v-794q44 49 101 87 362 246 497 345 57 42 92.5 65.5t94.5 48 110 24.5h2q51 0 110-24.5t94.5-48 92.5-65.5q170-123 498-345 57-39 100-87zm0-294q0 79-49 151t-122 123q-376 261-468 325-10 7-42.5 30.5t-54 38-52 32.5-57.5 27-50 9h-2q-23 0-50-9t-57.5-27-52-32.5-54-38-42.5-30.5q-91-64-262-182.5t-205-142.5q-62-42-117-115.5t-55-136.5q0-78 41.5-130t118.5-52h1472q65 0 112.5 47t47.5 113z"/></svg></div>

</div>
</div>
<div id=share-buttons-spacer> </div>


      <div id="commentics"></div>

    </main>

    
    


    
    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  
  &copy; &nbsp; PX|Alpha / Gert-Jan Aaftink  2015 - 
  <span itemprop="copyrightYear">2022 &nbsp; | &nbsp; All rights reserved </span>

  <!--  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
 
  <span class="author" itemprop="copyrightHolder">Gert-Jan Aaftink</span>
  -->
  
</div>


<div class="powered-by">
  Powered by <a class="theme-link" href="https://jekyllrb.com">Jekyll</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/simpleyyt/jekyll-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>





















  
   
  
  
  
  
  
  <script type="text/javascript" src="/assets/lib/jquery/index.js?v=2.1.3"></script>

  
  
  
  
  
  <script type="text/javascript" src="/assets/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  
  
  
  
  <script type="text/javascript" src="/assets/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  
  
  
  
  <script type="text/javascript" src="/assets/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  
  
  
  
  <script type="text/javascript" src="/assets/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  
  
  
  
  <script type="text/javascript" src="/assets/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/assets/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/assets/js/src/motion.js?v=5.1.1"></script>



  
  

  <script type="text/javascript" src="/assets/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/assets/js/src/post-details.js?v=5.1.1"></script>


  


  <script type="text/javascript" src="/assets/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  




  

    

  





  






  

  

  
  


  

  

  

  
</body>
</html>

